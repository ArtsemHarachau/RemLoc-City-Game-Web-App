<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link href="css/style.css" rel="stylesheet" type="text/css" />

    <title>remloccitygame</title>
  </head>
  <body>
    <div id="parent">
      <h1>RemLoc City Game</h1>

      <div id="grid-container-parent" class="grid-container"></div>
      <div class="start-button-container">
        <button class="round icon-button left-arrow-icon-buttton send-button">
          <span class="start-button-text" id="start-button">Start</span>
        </button>
      </div>
    </div>

    <script>
      function createTrackElemWithTask(
        tooltipClass,
        tooltipTextClass,
        tooltipText,
        elemCode,
        leftMargin,
        topMargin,
        columnGrid,
        rowGrid
      ) {
        //div component for Tooltip
        let divParent = document.createElement("div");
        divParent.className = tooltipClass;
        divParent.style.marginLeft = leftMargin;
        divParent.style.marginTop = topMargin;

        //location material icons
        let trackElem = document.createElement("span");
        trackElem.className = "material-icons";
        trackElem.innerHTML = elemCode;

        divParent.appendChild(trackElem);

        //span component for TooltipText
        let spanTooltipText = document.createElement("span");
        spanTooltipText.className = tooltipTextClass;
        spanTooltipText.innerText = "\n" + tooltipText;

        divParent.style.gridColumn = columnGrid;
        divParent.style.gridRow = rowGrid;

        //add TooltipText to Tooltip div
        divParent.appendChild(spanTooltipText);

        return divParent;
      }

      function createTrackDirectionElem(
        spanParentClass,
        angleOfRotation,
        elemCode,
        leftMargin,
        topMargin,
        bottomMargin,
        columnGrid,
        rowGrid
      ) {
        let spanParent = document.createElement("span");
        spanParent.className = spanParentClass;
        spanParent.style.transform = "rotate(" + angleOfRotation + "deg)";
        spanParent.style.gridColumn = columnGrid;
        spanParent.style.gridRow = rowGrid;

        spanParent.style.marginLeft = leftMargin;
        spanParent.style.marginTop = topMargin;
        spanParent.style.marginBottom = bottomMargin;

        let trackElem = document.createElement("span");
        trackElem.className = "material-icons";
        trackElem.innerHTML = elemCode;
        trackElem.style.fontSize = "56px";

        spanParent.appendChild(trackElem);

        return spanParent;
      }

      //add track's elements to grid in html
      let gridContainerParent = document.querySelector(
        "#grid-container-parent"
      );

      //let maxNumberOfRows = 9;
      let maxNumberOfColumns = 22;
      const arrayAnglesOfRotation = [
        296.89, 108.89, -45.85, -29.6, -29.6, -29.6, 5.69, 1.63, -3.7, 5.8,
        20.67, 29.44, 27.96, 25.96, 25.67, 25.45, 23.89,
      ];
      let indexOfArrayAngles = 0;

      let countRow = 1;
      for (let i = 1; i <= maxNumberOfColumns; i++) {
        if (i == 1) {
          let trackElem = document.createElement("span");
          trackElem.className = "material-icons";

          trackElem.style.gridColumn = i + 3;
          trackElem.style.gridRow = -i;

          trackElem.style.marginTop = "48px";
          trackElem.innerHTML = "&#xe55c;";

          gridContainerParent.appendChild(trackElem);
        } else if (i == 2) {
          gridContainerParent.appendChild(
            createTrackDirectionElem(
              "track",
              arrayAnglesOfRotation[indexOfArrayAngles],
              "&#xe931;",
              "48px",
              "0px",
              "40px",
              i + 1,
              -i + 1
            )
          );

          indexOfArrayAngles++;
        } else if (i == 3) {
          gridContainerParent.appendChild(
            createTrackDirectionElem(
              "track",
              arrayAnglesOfRotation[indexOfArrayAngles],
              "&#xe931;",
              "80px",
              "32px",
              "0px",
              i + 1,
              -i + 1
            )
          );

          indexOfArrayAngles++;
        } else if (i == 4) {
          gridContainerParent.appendChild(
            createTrackDirectionElem(
              "track",
              arrayAnglesOfRotation[indexOfArrayAngles],
              "&#xe931;",
              "32px",
              "0px",
              "0px",
              i,
              -i
            )
          );

          indexOfArrayAngles++;
        } else if (i == 5) {
          gridContainerParent.appendChild(
            createTrackElemWithTask(
              "tooltip",
              "tooltiptext1",
              "Task 1",
              "&#xe0c8;",
              "32px",
              "0px",
              i,
              -i
            )
          );
        } else if (i == 9) {
          gridContainerParent.appendChild(
            createTrackElemWithTask(
              "tooltip",
              "tooltiptext2",
              "Task 2",
              "&#xe0c8;",
              "4px",
              "16px",
              i,
              -i
            )
          );
        } else if (i >= 10 && i <= 13) {
          gridContainerParent.appendChild(
            createTrackDirectionElem(
              "track",
              arrayAnglesOfRotation[indexOfArrayAngles],
              "&#xe931;",
              "0px",
              "0px",
              "0px",
              i,
              1
            )
          );

          indexOfArrayAngles++;
        } else if (i == 14) {
          countRow++;

          gridContainerParent.appendChild(
            createTrackElemWithTask(
              "tooltip",
              "tooltiptext3",
              "Task 3",
              "&#xe0c8;",
              "0px",
              "0px",
              i,
              countRow
            )
          );

          countRow--;
        } else if (i >= 15 && i <= 18) {
          countRow++;

          gridContainerParent.appendChild(
            createTrackDirectionElem(
              "track",
              arrayAnglesOfRotation[indexOfArrayAngles],
              "&#xe931;",
              "0px",
              "0px",
              "0px",
              i,
              countRow
            )
          );

          indexOfArrayAngles++;
        } else if (i >= 19 && i <= 21) {
          countRow++;

          gridContainerParent.appendChild(
            createTrackDirectionElem(
              "track",
              arrayAnglesOfRotation[indexOfArrayAngles],
              "&#xe931;",
              "0px",
              "0px",
              "0px",
              i,
              countRow
            )
          );

          indexOfArrayAngles++;
        } else if (i == 22) {
          gridContainerParent.appendChild(
            createTrackElemWithTask(
              "tooltip",
              "tooltiptext4",
              "Final place",
              "&#xe177;",
              "32px",
              "20px",
              i - 1,
              countRow
            )
          );
        } else {
          gridContainerParent.appendChild(
            createTrackDirectionElem(
              "track",
              arrayAnglesOfRotation[indexOfArrayAngles],
              "&#xe931;",
              "0px",
              "0px",
              "0px",
              i,
              -i
            )
          );

          indexOfArrayAngles++;
        }
      }

      document
        .getElementById("start-button")
        .addEventListener("click", () => window.open("./html/basicInfo.html"));
    </script>
  </body>
</html>
